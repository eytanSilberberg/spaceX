{"ast":null,"code":"export const storageService = {\n  query,\n  post,\n  get,\n  put,\n  remove\n};\n\nfunction query(entityType) {\n  var entities = JSON.parse(localStorage.getItem(entityType)) || [];\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(entities);\n    }, 500);\n  });\n}\n\nasync function post(entityType, newEntity) {\n  const users = await query(entityType);\n  users.push(newEntity);\n\n  _save(entityType, users);\n\n  return newEntity;\n}\n\nfunction _save(entityType, entities) {\n  localStorage.setItem(entityType, JSON.stringify(entities));\n}\n\nfunction get(entityType, entityId) {\n  return query(entityType).then(entities => entities.find(entity => entity._id === entityId));\n}\n\nfunction put(entityType, updatedEntity) {\n  return query(entityType).then(entities => {\n    const idx = entities.findIndex(entity => entity._id === updatedEntity._id);\n    entities.splice(idx, 1, updatedEntity);\n\n    _save(entityType, entities);\n\n    return updatedEntity;\n  });\n}\n\nfunction remove(entityType, entityId) {\n  return query(entityType).then(entities => {\n    const idx = entities.findIndex(entity => entity._id === entityId);\n    entities.splice(idx, 1);\n\n    _save(entityType, entities);\n  });\n}","map":{"version":3,"names":["storageService","query","post","get","put","remove","entityType","entities","JSON","parse","localStorage","getItem","Promise","resolve","reject","setTimeout","newEntity","users","push","_save","setItem","stringify","entityId","then","find","entity","_id","updatedEntity","idx","findIndex","splice"],"sources":["/Users/eytan/Desktop/coding/codingAcademy/projects/spaceX/spaceX-frontend/src/services/basic/async-storage.service.js"],"sourcesContent":["export const storageService = {\n    query,\n    post,\n    get,\n    put,\n    remove,\n}\n\nfunction query(entityType) {\n    var entities = JSON.parse(localStorage.getItem(entityType)) || []\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            resolve(entities)\n        }, 500)\n    })\n}\n\nasync function post(entityType, newEntity) {\n    const users = await query(entityType)\n    users.push(newEntity)\n    _save(entityType, users)\n    return newEntity\n}\n\nfunction _save(entityType, entities) {\n    localStorage.setItem(entityType, JSON.stringify(entities))\n}\n\n\n\nfunction get(entityType, entityId) {\n    return query(entityType)\n        .then(entities => entities.find(entity => entity._id === entityId))\n}\n\nfunction put(entityType, updatedEntity) {\n    return query(entityType)\n        .then(entities => {\n            const idx = entities.findIndex(entity => entity._id === updatedEntity._id)\n            entities.splice(idx, 1, updatedEntity)\n            _save(entityType, entities)\n            return updatedEntity\n        })\n}\n\nfunction remove(entityType, entityId) {\n    return query(entityType)\n        .then(entities => {\n            const idx = entities.findIndex(entity => entity._id === entityId)\n            entities.splice(idx, 1)\n            _save(entityType, entities)\n        })\n}"],"mappings":"AAAA,OAAO,MAAMA,cAAc,GAAG;EAC1BC,KAD0B;EAE1BC,IAF0B;EAG1BC,GAH0B;EAI1BC,GAJ0B;EAK1BC;AAL0B,CAAvB;;AAQP,SAASJ,KAAT,CAAeK,UAAf,EAA2B;EACvB,IAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBL,UAArB,CAAX,KAAgD,EAA/D;EACA,OAAO,IAAIM,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpCC,UAAU,CAAC,MAAM;MACbF,OAAO,CAACN,QAAD,CAAP;IACH,CAFS,EAEP,GAFO,CAAV;EAGH,CAJM,CAAP;AAKH;;AAED,eAAeL,IAAf,CAAoBI,UAApB,EAAgCU,SAAhC,EAA2C;EACvC,MAAMC,KAAK,GAAG,MAAMhB,KAAK,CAACK,UAAD,CAAzB;EACAW,KAAK,CAACC,IAAN,CAAWF,SAAX;;EACAG,KAAK,CAACb,UAAD,EAAaW,KAAb,CAAL;;EACA,OAAOD,SAAP;AACH;;AAED,SAASG,KAAT,CAAeb,UAAf,EAA2BC,QAA3B,EAAqC;EACjCG,YAAY,CAACU,OAAb,CAAqBd,UAArB,EAAiCE,IAAI,CAACa,SAAL,CAAed,QAAf,CAAjC;AACH;;AAID,SAASJ,GAAT,CAAaG,UAAb,EAAyBgB,QAAzB,EAAmC;EAC/B,OAAOrB,KAAK,CAACK,UAAD,CAAL,CACFiB,IADE,CACGhB,QAAQ,IAAIA,QAAQ,CAACiB,IAAT,CAAcC,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeJ,QAAvC,CADf,CAAP;AAEH;;AAED,SAASlB,GAAT,CAAaE,UAAb,EAAyBqB,aAAzB,EAAwC;EACpC,OAAO1B,KAAK,CAACK,UAAD,CAAL,CACFiB,IADE,CACGhB,QAAQ,IAAI;IACd,MAAMqB,GAAG,GAAGrB,QAAQ,CAACsB,SAAT,CAAmBJ,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeC,aAAa,CAACD,GAA1D,CAAZ;IACAnB,QAAQ,CAACuB,MAAT,CAAgBF,GAAhB,EAAqB,CAArB,EAAwBD,aAAxB;;IACAR,KAAK,CAACb,UAAD,EAAaC,QAAb,CAAL;;IACA,OAAOoB,aAAP;EACH,CANE,CAAP;AAOH;;AAED,SAAStB,MAAT,CAAgBC,UAAhB,EAA4BgB,QAA5B,EAAsC;EAClC,OAAOrB,KAAK,CAACK,UAAD,CAAL,CACFiB,IADE,CACGhB,QAAQ,IAAI;IACd,MAAMqB,GAAG,GAAGrB,QAAQ,CAACsB,SAAT,CAAmBJ,MAAM,IAAIA,MAAM,CAACC,GAAP,KAAeJ,QAA5C,CAAZ;IACAf,QAAQ,CAACuB,MAAT,CAAgBF,GAAhB,EAAqB,CAArB;;IACAT,KAAK,CAACb,UAAD,EAAaC,QAAb,CAAL;EACH,CALE,CAAP;AAMH"},"metadata":{},"sourceType":"module"}